![](https://cdn.luogu.com.cn/upload/image_hosting/jqs2udr3.png)

**定理**

$\forall S\in\binom{\{1,2,\dots,2n\}}{n+1}$，$\exist x,y\in S$ 满足 $x<y\land x\mid y$。

**证明**

设 $T_m=\{2^km:k\in\N\}$。易证 $\forall x\in S$，$T_1,T_3,\dots,T_{2n-1}$ 这 $n$ 个集合中恰有一个集合包含 $x$。应用鸽巢原理得到 $\exist x,y\in S$，满足 $x<y$ 且 $x$ 和 $y$ 被划分到同一个集合中。易证 $x\mid y$。

**定理**

$\forall p\in S_{mn+1}$，必存在一个长度 $m+1$ 的上升子序列或者一个长度 $n+1$ 的下降子序列。

**证明**

设 $f_i$ 为以 $p_i$ 结尾的最长上升子序列长度，$g_i$ 为以 $p_i$ 结尾的最长下降子序列长度。

>**引理**
>
>$$
>\forall i<j, f_i<f_j\lor g_i<g_j
>$$
>**证明**
>
>若 $p_i<p_j$，有 $f_i< f_j$。若 $p_i>p_j$，有 $g_i<g_j$。

若 $f_i\le m,g_i\le n$，应用鸽巢原理得到 $\exist i<j,f_i=f_j\land g_i=g_j$，由引理有存在 $f_i>m$ 或者 $g_i>n$。

**定理**

任取两个可重集 $A=\{a_1,a_2,\dots,a_n\}, B=\{b_1,b_2,\dots,b_n\}$，其中元素都是 $1$ 到 $n$ 的整数，那么 $\exist A'\subseteq A,B'\subseteq B$ 满足 $\sum_{x\in A'}x=\sum_{x\in B'}x$。

**证明**

令 $\alpha_m=\sum_{i=1}^ma_i, \beta_m=\sum_{i=1}^mb_i$。不失一般性地，设 $\alpha_n\le\beta_n$。

令 $f_i$ 为满足 $\alpha_i\ge\beta_{f_i}$ 的最大整数。令 $\delta_i=\alpha_i-\beta_{f_i}$。若 $\delta_i\ge n$，那么 $\delta_i-b_{f_i+1}\ge0$，即 $\alpha_i\ge\beta_{f_i+1}$，故 $\delta_i<n$。应用鸽巢原理得到 $\exist i<j,\delta_i=\delta_j$。易证取 $A'=\{a_{i+1},a_{i+2},\dots,a_j\},B'=\{b_{f_i+1},b_{f_i+2},\dots,b_{f_j}\}$ 时 $\sum_{x\in A'}x=\sum_{x\in B'}x$。

**定理**

任取无向图 $G=\langle V,E\rangle$，每个边有一个两两不同的实数权值。那么 $G$ 存在一条长度为 $\frac{2|E|}{|V|}$ 的单调上升路径。

**证明**

在每个顶点上放一个「探险家」。依边权递增序枚举每条边，交换两个顶点上的「探险家」。易证每个「探险家」对应的路径都是一条单调上升路径。「探险家」的路径长度之和为 $2|E|$，应用鸽巢原理得到存在一个「探险家」对应的路径长度不小于 $\frac{2|E|}{|V|}$。

**定理**

任取 $n$ 个非空区间 $[l_1,r_1],[l_2,r_2],\dots,[l_n,r_n]$，满足 $\bigcup_{i=1}^n[l_i,r_i]=[0,1]$。

令
$$
f(I)=\int_0^1[\sum_{i\in I}[x\in[l_i,r_i]]=1]{\rm d}x
$$
那么 $\exist I\subseteq\{1,2,\dots,n\},f(I)\ge\frac{2}{3}$。

**证明**

令 $I=\{1,2,\dots,n\}$，重复以下过程：若 $i$ 满足 $\forall x\in[l_i,r_i],\exist j\in I\setminus\{i\},x\in[l_j,r_j]$，从 $I$ 中删去 $i$。

设此时 $I=\{i_1,i_2,\dots,i_{|I|}\}$。不失一般性地，设 $l_{i_j}\le l_{i_{j+1}}$。

易证此时有 $\bigcup_{i\in I}[l_i,r_i]=[0,1]$，并且 $\forall1<j<|I|,r_{i_{j-1}}<l_{i_{j+1}}$。

令 $I_0=\{i_j:1\le j\le|I|\land j\equiv1\pmod2\},I_1=I\setminus I_0$，那么就有 $f(I)+f(I_0)+f(I_1)=2$。应用鸽笼原理得到 $\exist I'\in\{I,I_0,I_1\},f(I')\ge\frac{2}{3}$。
